<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    // let date = new Date()
    // date.setMinutes(45)
    // let dateStr = date.toUTCString()
    // console.log(dateStr)
    // let cookie = document.cookie
    // document.cookie = "name=yaoming"
    // document.cookie = 'sex=man; expires=' + dateStr
    // console.log(document.cookie)


    function getCookie(){
        let obj = {}
        // 获得的cookie是字符串
        let cookieString = document.cookie
        // 转成数组
        let cookieArr = cookieString.split(';')
        console.log(cookieArr)
        // 遍历得到的数组
        cookieArr.forEach(item => {
            let tempArr = item.split('=')
            console.log(tempArr)
            let key = tempArr[0].trim()
            let value = tempArr[1]
            obj[key] = value
        })
        // 得到了cookie
        return obj
    }
    // 调用函数,得到cookie
    let cookieObj = getCookie()
    console.log(cookieObj)


    // 设置cookie,假设用户传入的是以秒为单位的
    function setCookie(key, value, expires) {
        if (!expires) {
            document.cookie = `${key}=${value}`
        }else {
            let date = new Date()
            let unix = date.getTime()
            unix = expires * 1000 + unix

            let newDateStr = new Date(unix).toUTCString()
            document.cookie = `${key}=${value}; expires=${newDateStr}`
        }
    }

    setCookie('food', 'mianTiao')
    setCookie('start', '陈乔恩', '60')


    // 删除cookie 设置过期时间
    function removeCookie(key) {
        let value = ''
        let date = new Date().getTime()
        date = date - 1000
        let dateStr = new Date(date).toUTCString()
        document.cookie = `${key}=${value};expires=${dateStr}`
    }
</script>
</html>